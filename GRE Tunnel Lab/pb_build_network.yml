---
  - name: This playbook configures Interfaces for network
    hosts: all
    gather_facts: false
    tasks:
      - name: Configure interfaces on network routers
        ios_interfaces:
          config:
            - name: "{{ item.name }}"
              description: "{{ item.description }}"
        with_items: "{{interfaces[inventory_hostname]}}"

      - name: Configure IP address for network routers
        ios_l3_interface:
          config:
          - name: "{{ item.name }}"
            ipv4:
            - address: "{{ item.address }}"
          state: merged
        with_items: "{{interfaces[inventory_hostname]}}"